import{G as F,N as $,ap as L,n as w,ax as I,I as S,ah as P,aP as q,E as z,aQ as G,aR as M,o as U,A as j,aS as K,aT as Q}from"./runtime.D2_qJMqH.js";import{a as W}from"./render.DYyZBxIN.js";import{c as D}from"./each.DhYb_c6Z.js";const H=()=>performance.now(),b={tick:i=>requestAnimationFrame(i),now:()=>H(),tasks:new Set};function O(i){b.tasks.forEach(t=>{t.c(i)||(b.tasks.delete(t),t.f())}),b.tasks.size!==0&&b.tick(O)}function J(i){let t;return b.tasks.size===0&&b.tick(O),{promise:new Promise(a=>{b.tasks.add(t={c:i,f:a})}),abort(){b.tasks.delete(t)}}}function N(i,t){i.dispatchEvent(new CustomEvent(t))}function V(i){if(i==="float")return"cssFloat";if(i==="offset")return"cssOffset";if(i.startsWith("--"))return i;const t=i.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function x(i){const t={},a=i.split(";");for(const s of a){const[e,o]=s.split(":");if(!e||o===void 0)break;const f=V(e.trim());t[f]=o.trim()}return t}const X=i=>i;function tt(i,t,a){var s=D,e,o,f,h=null;s.a??(s.a={element:i,measure(){e=this.element.getBoundingClientRect()},apply(){if(f==null||f.abort(),o=this.element.getBoundingClientRect(),e.left!==o.left||e.right!==o.right||e.top!==o.top||e.bottom!==o.bottom){const d=t()(this.element,{from:e,to:o},a==null?void 0:a());f=A(this.element,d,void 0,1,()=>{f==null||f.abort(),f=void 0})}},fix(){if(!i.getAnimations().length){var{position:d,width:p,height:u}=getComputedStyle(i);if(d!=="absolute"&&d!=="fixed"){var r=i.style;h={position:r.position,width:r.width,height:r.height,transform:r.transform},r.position="absolute",r.width=p,r.height=u;var n=i.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){var m=`translate(${e.left-n.left}px, ${e.top-n.top}px)`;r.transform=r.transform?`${r.transform} ${m}`:m}}}},unfix(){if(h){var d=i.style;d.position=h.position,d.width=h.width,d.height=h.height,d.transform=h.transform}}}),s.a.element=i}function it(i,t,a,s){var e=(i&K)!==0,o=(i&Q)!==0,f=e&&o,h=(i&q)!==0,d=f?"both":e?"in":"out",p,u=t.inert,r,n;function m(){var v=P,T=F;I(null),S(null);try{return p??(p=a()(t,(s==null?void 0:s())??{},{direction:d}))}finally{I(v),S(T)}}var g={is_global:h,in(){var v;if(t.inert=u,!e){n==null||n.abort(),(v=n==null?void 0:n.reset)==null||v.call(n);return}o||r==null||r.abort(),N(t,"introstart"),r=A(t,m(),n,1,()=>{N(t,"introend"),r==null||r.abort(),r=p=void 0})},out(v){if(!o){v==null||v(),p=void 0;return}t.inert=!0,N(t,"outrostart"),n=A(t,m(),r,0,()=>{N(t,"outroend"),v==null||v()})},stop:()=>{r==null||r.abort(),n==null||n.abort()}},c=F;if((c.transitions??(c.transitions=[])).push(g),e&&W){var l=h;if(!l){for(var _=c.parent;_&&_.f&z;)for(;(_=_.parent)&&!(_.f&G););l=!_||(_.f&M)!==0}l&&U(()=>{j(()=>g.in())})}}function A(i,t,a,s,e){var o=s===1;if($(t)){var f,h=!1;return L(()=>{if(!h){var l=t({direction:o?"in":"out"});f=A(i,l,a,s,e)}}),{abort:()=>{h=!0,f==null||f.abort()},deactivate:()=>f.deactivate(),reset:()=>f.reset(),t:()=>f.t()}}if(a==null||a.deactivate(),!(t!=null&&t.duration))return e(),{abort:w,deactivate:w,reset:w,t:()=>s};const{delay:d=0,css:p,tick:u,easing:r=X}=t;var n=[];if(o&&a===void 0&&(u&&u(0,1),p)){var m=x(p(0,1));n.push(m,m)}var g=()=>1-s,c=i.animate(n,{duration:d});return c.onfinish=()=>{var l=(a==null?void 0:a.t())??1-s;a==null||a.abort();var _=s-l,v=t.duration*Math.abs(_),T=[];if(v>0){if(p)for(var R=Math.ceil(v/16.666666666666668),C=0;C<=R;C+=1){var k=l+_*r(C/R),B=p(k,1-k);T.push(x(B))}g=()=>{var E=c.currentTime;return l+_*r(E/v)},u&&J(()=>{if(c.playState!=="running")return!1;var E=g();return u(E,1-E),!0})}c=i.animate(T,{duration:v,fill:"forwards"}),c.onfinish=()=>{g=()=>s,u==null||u(s,1-s),e()}},{abort:()=>{c&&(c.cancel(),c.effect=null,c.onfinish=w)},deactivate:()=>{e=w},reset:()=>{s===0&&(u==null||u(1,0))},t:()=>g()}}export{tt as a,J as l,b as r,it as t};
