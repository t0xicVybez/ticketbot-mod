import{e as ul}from"../chunks/index.g5YcAAdQ.js";import"../chunks/disclose-version.Bg9kRutz.js";import{a3 as fl,t as A,p as Tt,aZ as Te,x as q,a_ as Kt,c as v,a as Mt,r as p,b as P,a$ as Ue,b0 as Ft,s as b,f as $,g as l,e as Ie,K as me,aU as ml,d as gt,h as $e}from"../chunks/runtime.D2_qJMqH.js";import{s as Me}from"../chunks/render.DYyZBxIN.js";import{i as X}from"../chunks/if.DQDEx0g4.js";import{e as Ot,i as Qt}from"../chunks/each.DhYb_c6Z.js";import{t as J,a as w,n as Nt,c as ge,e as St}from"../chunks/template.-1lJmaN6.js";import{s as E,b as Et,c as gl,r as tt}from"../chunks/attributes.HKi8Fu_N.js";import{m as vl,w as pl,j as u,k as hl}from"../chunks/utils.Dghph3y9.js";import{b as et,R as Rt}from"../chunks/Required.0zfnBhzh.js";import{b as Jt}from"../chunks/select.DchCu2yw.js";import{s as ye,p as Ct,a as bl}from"../chunks/event-modifiers.BDD76Zze.js";import{p as qe}from"../chunks/proxy.CdfeBWYI.js";import{s as Yt,a as $t}from"../chunks/store.B-TJ19st.js";import{b as vt,r as _l}from"../chunks/legacy-client.bwmqDaLy.js";import{p as yl}from"../chunks/stores.DEmN4aYk.js";import"../chunks/legacy.CtaTdtmd.js";import{e as wl}from"../chunks/index.B101_2Qz.js";import{E as xl}from"../chunks/ErrorBox.CbGQpU3f.js";import{h as Vt}from"../chunks/html.BiDgUgRj.js";import{s as ie,f as Sl}from"../chunks/index.DF_JIHC5.js";import{s as ke,t as pe}from"../chunks/class.CZ_Lwgno.js";import{r as Ht,l as Ol,a as Cl}from"../chunks/transitions.BIDcdJtW.js";import{i as el}from"../chunks/lifecycle.J282GXZ8.js";import{p as n,l as At}from"../chunks/props.DioveIhQ.js";import{c as kl}from"../chunks/index-client.BK-sKD8p.js";import{w as Tl}from"../chunks/entry.DD3pBHu9.js";function lt(s,e,i,r){var c=s.__styles??(s.__styles={});c[e]!==i&&(c[e]=i,i==null?s.style.removeProperty(e):s.style.setProperty(e,i,""))}function Ml(s,e){vl(window,["resize"],()=>pl(()=>e(window[s])))}function R(s,e){var f;var i=(f=s.$$events)==null?void 0:f[e.type],r=fl(i)?i.slice():i==null?[]:[i];for(var c of r)c.call(this,e)}async function Nl({fetch:s,params:e}){var O;const i={credentials:"include"},r=await s(`/api/admin/guilds/${e.guild}/categories`,i),c=(O=r.headers.get("Content-Type"))==null?void 0:O.includes("json"),f=c?await r.json():await r.text();if(!r.ok)ul(r.status,c?JSON.stringify(f):f);else return{categories:f,channels:await(await s(`/api/admin/guilds/${e.guild}/data?query=channels.cache`,i)).json()}}const Na=Object.freeze(Object.defineProperty({__proto__:null,load:Nl},Symbol.toStringTag,{value:"Module"}));var El=J('<div class="svelte-154g05d"></div>');function Al(s,e){let i=n(e,"color",24,()=>"cornflowerblue"),r=n(e,"duration",24,()=>"1.5s"),c=n(e,"size",24,()=>"1em");var f=El();A(()=>{E(f,"style",`--duration: ${r()??""}`),lt(f,"border-color",`${i()??""} transparent ${i()??""}
  ${i()??""}`),lt(f,"width",c()),lt(f,"height",c())}),w(s,f)}function Wt(s){return Object.prototype.toString.call(s)==="[object Date]"}function kt(s,e,i,r){if(typeof i=="number"||Wt(i)){const c=r-i,f=(i-e)/(s.dt||1/60),O=s.opts.stiffness*c,z=s.opts.damping*f,K=(O-z)*s.inv_mass,g=(f+K)*s.dt;return Math.abs(g)<s.opts.precision&&Math.abs(c)<s.opts.precision?r:(s.settled=!1,Wt(i)?new Date(i.getTime()+g):i+g)}else{if(Array.isArray(i))return i.map((c,f)=>kt(s,e[f],i[f],r[f]));if(typeof i=="object"){const c={};for(const f in i)c[f]=kt(s,e[f],i[f],r[f]);return c}else throw new Error(`Cannot spring ${typeof i} values`)}}function Dl(s,e={}){const i=Tl(s),{stiffness:r=.15,damping:c=.8,precision:f=.01}=e;let O,z,K,g=s,le=s,re=1,I=0,oe=!1;function ae(U,ne={}){le=U;const we=K={};return s==null||ne.hard||V.stiffness>=1&&V.damping>=1?(oe=!0,O=Ht.now(),g=U,i.set(s=le),Promise.resolve()):(ne.soft&&(I=1/((ne.soft===!0?.5:+ne.soft)*60),re=0),z||(O=Ht.now(),oe=!1,z=Ol(H=>{if(oe)return oe=!1,z=null,!1;re=Math.min(re+I,1);const he={inv_mass:re,opts:V,settled:!0,dt:(H-O)*60/1e3},Ne=kt(he,g,s,le);return O=H,g=s,i.set(s=Ne),he.settled&&(z=null),!he.settled})),new Promise(H=>{z.promise.then(()=>{we===K&&H()})}))}const V={set:ae,update:(U,ne)=>ae(U(le,s),ne),subscribe:i.subscribe,stiffness:r,damping:c,precision:f};return V}var jl=J("<span><!></span>");function ql(s,e){Tt(e,!1);const i=Yt(),r=()=>$t(oe,"$store",i);let c=n(e,"wiggle",12,!1),f=n(e,"angle",8,0),O=n(e,"scale",8,1),z=n(e,"dx",8,0),K=n(e,"dy",8,0),g=n(e,"duration",8,200),le=n(e,"stiffness",8,.05),re=n(e,"damping",8,.1),I={angle:0,scale:1,dx:0,dy:0},oe=Dl(I,{stiffness:le(),damping:re()});Te(()=>(q(c()),q(g())),()=>{c()&&setTimeout(()=>c(!1),g())}),Te(()=>(q(c()),q(O()),q(f()),q(z()),q(K())),()=>{oe.set(c()?{scale:O(),angle:f(),dx:z(),dy:K()}:I)}),Kt(),el();var ae=jl(),V=v(ae);ie(V,e,"default",{},null),p(ae),A(()=>lt(ae,"transform",`rotate(${r().angle??""}deg) scale(${r().scale??""}) translate(${r().dx??""}px,
  ${r().dy??""}px)`)),w(s,ae),Mt()}var Il=Nt('<svg><path d="M3.646 9.146a.5.5 0 0 1 .708 0L8 12.793l3.646-3.647a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 0-.708zm0-2.292a.5.5 0 0 0 .708 0L8 3.207l3.646 3.647a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 0 0 0 .708z"></path></svg>');function Ll(s,e){const i=At(e,["children","$$slots","$$events","$$legacy"]);var r=Il();let c;A(()=>c=Et(r,c,{...i,fill:"currentColor",viewBox:"0 0 16 16"},void 0,!0)),w(s,r)}var Ul=Nt('<svg><path d="M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"></path></svg>');function Zt(s,e){const i=At(e,["children","$$slots","$$events","$$legacy"]);var r=Ul();let c;A(()=>c=Et(r,c,{...i,viewBox:"0 0 24 24",fill:"currentColor"},void 0,!0)),w(s,r)}var Bl=Nt('<svg><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2S2 6.477 2 12s4.477 10 10 10Zm-4.906-3.68L18.32 7.094A8 8 0 0 1 7.094 18.32ZM5.68 16.906A8 8 0 0 1 16.906 5.68L5.68 16.906Z"></path></svg>');function Pl(s,e){const i=At(e,["children","$$slots","$$events","$$legacy"]);var r=Bl();let c;A(()=>c=Et(r,c,{...i,viewBox:"0 0 24 24",fill:"currentColor"},void 0,!0)),w(s,r)}const te=s=>s instanceof Object?(s.label===void 0&&console.error(`MultiSelect option ${JSON.stringify(s)} is an object but has no label key`),s.label):`${s}`;function Gt(s,e=null){let i="";if(["selected","option",null].includes(e)||console.error(`MultiSelect: Invalid key=${e} for get_style`),typeof s=="object"&&s.style&&(typeof s.style=="string"&&(i=s.style),typeof s.style=="object")){if(e&&e in s.style)return s.style[e]??"";console.error(`Invalid style object for option=${JSON.stringify(s)}`)}return i.trim()&&!i.trim().endsWith(";")&&(i+=";"),i}var zl=J('<button type="button" class="remove svelte-1ndgm4m"><!></button>'),Fl=J('<li role="option" aria-selected="true"><!> <!></li>'),Rl=J("<span> </span>"),Jl=J('<button type="button" class="remove remove-all svelte-1ndgm4m"><!></button>'),Vl=J("<!> <!>",1),Hl=J('<li role="option" aria-selected="false"><!></li>'),Wl=J('<li role="option" aria-selected="false"><!></li>'),Zl=J('<ul role="listbox"><!> <!></ul>'),Gl=J('<div role="searchbox" tabindex="-1"><input tabindex="-1" aria-hidden="true" aria-label="ignore this, used only to prevent form submission if select is required but empty" class="form-control svelte-1ndgm4m"> <!> <ul aria-label="selected options"><!> <input> <!></ul> <!> <!> <!></div>');function Xl(s,e){var zt;Tt(e,!1);const i=Ue();let r=n(e,"activeIndex",12,null),c=n(e,"activeOption",12,null),f=n(e,"createOptionMsg",24,()=>"Create this option..."),O=n(e,"allowUserOptions",8,!1),z=n(e,"allowEmpty",8,!1),K=n(e,"autocomplete",24,()=>"off"),g=n(e,"autoScroll",8,!0),le=n(e,"breakpoint",8,800),re=n(e,"defaultDisabledTitle",24,()=>"This option is disabled"),I=n(e,"disabled",8,!1),oe=n(e,"disabledInputTitle",24,()=>"This input is disabled"),ae=n(e,"duplicateOptionMsg",24,()=>"This option is already selected"),V=n(e,"duplicates",8,!1),U=n(e,"key",8,t=>`${te(t)}`.toLowerCase()),ne=n(e,"filterFunc",8,(t,a)=>a?`${te(t)}`.toLowerCase().includes(a.toLowerCase()):!0),we=n(e,"closeDropdownOnSelect",24,()=>"desktop"),H=n(e,"form_input",12,null),he=n(e,"highlightMatches",8,!0),Ne=n(e,"id",8,null),xe=n(e,"input",12,null),Be=n(e,"inputClass",24,()=>""),at=n(e,"inputStyle",8,null),Pe=n(e,"inputmode",8,null),ce=n(e,"invalid",12,!1),nt=n(e,"liActiveOptionClass",24,()=>""),ze=n(e,"liActiveUserMsgClass",24,()=>""),st=n(e,"liOptionClass",24,()=>""),Fe=n(e,"liOptionStyle",8,null),Re=n(e,"liSelectedClass",24,()=>""),pt=n(e,"liSelectedStyle",8,null),Je=n(e,"liUserMsgClass",24,()=>""),Ve=n(e,"loading",8,!1),W=n(e,"matchingOptions",28,()=>[]),Se=n(e,"maxOptions",8,void 0),C=n(e,"maxSelect",8,null),it=n(e,"maxSelectMsg",8,(t,a)=>a>1?`${t}/${a}`:""),He=n(e,"maxSelectMsgClass",24,()=>""),rt=n(e,"name",8,null),Ee=n(e,"noMatchingOptionsMsg",24,()=>"No matching options"),be=n(e,"open",12,!1),Z=n(e,"options",12),Oe=n(e,"outerDiv",12,null),ot=n(e,"outerDivClass",24,()=>""),Le=n(e,"parseLabelsAsHtml",8,!1),We=n(e,"pattern",8,null),Ze=n(e,"placeholder",8,null),ct=n(e,"removeAllTitle",24,()=>"Remove all"),Ge=n(e,"removeBtnTitle",24,()=>"Remove"),Xe=n(e,"minSelect",8,null),G=n(e,"required",8,!1),dt=n(e,"resetFilterOnAdd",8,!0),M=n(e,"searchText",28,()=>""),o=n(e,"selected",28,()=>{var t;return((t=Z())==null?void 0:t.filter(a=>a instanceof Object&&(a==null?void 0:a.preselected)).slice(0,C()??void 0))??[]}),d=n(e,"sortSelected",8,!1),k=n(e,"selectedOptionsDraggable",24,()=>!d()),Q=n(e,"style",8,null),ve=n(e,"ulOptionsClass",24,()=>""),se=n(e,"ulSelectedClass",24,()=>""),Ae=n(e,"ulSelectedStyle",8,null),Ke=n(e,"ulOptionsStyle",8,null),ht=n(e,"value",12,null);const tl=t=>{ht(C()===1?t[0]??null:t)},ll=t=>{C()===1?o(t?[t]:[]):o(t??[])};let bt=Ue(!1);((zt=Z())==null?void 0:zt.length)>0||(O()||Ve()||I()||z()?Z([]):console.error("MultiSelect received no options")),C()!==null&&C()<1&&console.error(`MultiSelect's maxSelect must be null or positive integer, got ${C()}`),Array.isArray(o())||console.error(`MultiSelect's selected prop should always be an array, got ${o()}`),C()&&typeof G()=="number"&&G()>C()&&console.error(`MultiSelect maxSelect=${C()} < required=${G()}, makes it impossible for users to submit a valid form`),Le()&&O()&&console.warn("Don't combine parseLabelsAsHtml and allowUserOptions. It's susceptible to XSS attacks!"),d()&&k()&&console.warn("MultiSelect's sortSelected and selectedOptionsDraggable should not be combined as any user re-orderings of selected options will be undone by sortSelected on component re-renders."),O()&&!f()&&f()!==null&&console.error(`MultiSelect has allowUserOptions=${O()} but createOptionMsg=${f()} is falsy. This prevents the "Add option" <span> from showing up, resulting in a confusing user experience.`),Se()&&(typeof Se()!="number"||Se()<0||Se()%1!=0)&&console.error(`MultiSelect's maxOptions must be undefined or a positive integer, got ${Se()}`);const _e=kl();let Ce=Ue(!1),Dt=Ue();if(r()!==null&&!W()[r()])throw`Run time error, activeIndex=${r()} is out of bounds, matchingOptions.length=${W().length}`;function ut(t,a){var m,F;C()&&C()>1&&o().length>=C()&&P(bt,!0),!isNaN(Number(t))&&typeof o().map(te)[0]=="number"&&(t=Number(t));const _=o().map(U()).includes(U()(t));if((C()===null||C()===1||o().length<C())&&(V()||!_)){if(!Z().includes(t)&&[!0,"append"].includes(O())&&M().length>0&&(typeof Z()[0]=="object"?t={label:M()}:(["number","undefined"].includes(typeof Z()[0])&&!isNaN(Number(M()))?t=Number(M()):t=M(),_e("create",{option:t})),O()==="append"&&Z([...Z(),t])),dt()&&M(""),["",void 0,null].includes(t)){console.error(`MultiSelect: encountered falsy option ${t}`);return}C()===1?o([t]):(o([...o(),t]),d()===!0?o(o().sort((N,h)=>{const[S,y]=[te(N),te(h)];return`${S}`.localeCompare(`${y}`)})):typeof d()=="function"&&o(o().sort(d())));const Y=o().length===C(),D=we()===!0||we()==="desktop"&&l(Dt)<le();Y||D?_t(a):D||(m=xe())==null||m.focus(),_e("add",{option:t}),_e("change",{option:t,type:"add"}),ce(!1),(F=H())==null||F.setCustomValidity("")}}function ft(t){var m;if(o().length===0)return;const a=o().findIndex(F=>U()(F)===U()(t));let[_]=o().splice(a,1);if(_===void 0&&O()&&(_=typeof Z()[0]?{label:t}:t),_===void 0)return console.error(`Multiselect can't remove selected option ${JSON.stringify(t)}, not found in selected list`);o([...o()]),ce(!1),(m=H())==null||m.setCustomValidity(""),_e("remove",{option:_}),_e("change",{option:_,type:"remove"})}function mt(t){var a;I()||(be(!0),t instanceof FocusEvent||(a=xe())==null||a.focus(),_e("open",{event:t}))}function _t(t){var a;be(!1),(a=xe())==null||a.blur(),r(null),_e("close",{event:t})}async function al(t){var a;if(t.key==="Escape"||t.key==="Tab")_t(t),M("");else if(t.key==="Enter")t.preventDefault(),c()?(o().includes(c())?ft(c()):ut(c(),t),M("")):O()&&M().length>0?ut(M(),t):mt(t);else if(["ArrowDown","ArrowUp"].includes(t.key)){if(r()===null&&W().length>0){r(0);return}else if(O()&&!W().length&&M().length>0){P(Ce,!l(Ce));return}else if(r()===null)return;t.preventDefault();const _=t.key==="ArrowUp"?-1:1;if(r((r()+_)%W().length),r()<0&&r(W().length-1),g()){await ml();const m=document.querySelector("ul.options > li.active");m&&((a=m.scrollIntoViewIfNeeded)==null||a.call(m))}}else t.key==="Backspace"&&o().length>0&&!M()?ft(o().at(-1)):W().length>0&&r(0)}function jt(){_e("removeAll",{options:o()}),_e("change",{options:o(),type:"removeAll"}),o([]),M("")}const qt=t=>a=>{["Enter","Space"].includes(a.code)&&(a.preventDefault(),t())};function It(t){Oe()&&!Oe().contains(t.target)&&_t(t)}let yt=Ue(null);const nl=t=>a=>{if(!a.dataTransfer)return;a.dataTransfer.dropEffect="move";const _=parseInt(a.dataTransfer.getData("text/plain")),m=[...o()];_<t?(m.splice(t+1,0,m[_]),m.splice(_,1)):(m.splice(t,0,m[_]),m.splice(_+1,1)),o(m),P(yt,null)},sl=t=>a=>{a.dataTransfer&&(a.dataTransfer.effectAllowed="move",a.dataTransfer.dropEffect="move",a.dataTransfer.setData("text/plain",`${t}`))};let wt=Ue();function il(t){var D;if(!he()||typeof CSS>"u"||!CSS.highlights)return;CSS.highlights.clear();const a=(D=t==null?void 0:t.target)==null?void 0:D.value.trim().toLowerCase();if(!a)return;const _=document.createTreeWalker(l(wt),NodeFilter.SHOW_TEXT,{acceptNode:N=>(N==null?void 0:N.textContent)===Ee()?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),m=[];let F=_.nextNode();for(;F;)m.push(F),F=_.nextNode();const Y=m.map(N=>{var L;const h=(L=N.textContent)==null?void 0:L.toLowerCase(),S=[];let y=0;for(;h&&y<h.length;){const j=h.indexOf(a,y);if(j===-1)break;S.push(j),y=j+a.length}return S.map(j=>{const B=new Range;return B.setStart(N,j),B.setEnd(N,j+a.length),B})});CSS.highlights.set("sms-search-matches",new Highlight(...Y.flat()))}Te(()=>q(o()),()=>{tl(o())}),Te(()=>q(ht()),()=>{ll(ht())}),Te(()=>(q(Z()),q(ne()),q(M()),q(o()),q(U()),q(V())),()=>{W(Z().filter(t=>ne()(t,M())&&(!o().map(U()).includes(U()(t))||V())))}),Te(()=>(q(W()),q(r())),()=>{c(W()[r()??-1]??null)}),Te(()=>(q(o()),te),()=>{P(i,t=>o().map(te).includes(t))}),Te(()=>(q(G()),q(H())),()=>{var t;G(),(t=H())==null||t.setCustomValidity("")}),Kt(),el();var ee=Gl();u("click",Ft,It),u("touchstart",Ft,It);var De=v(ee);tt(De),A(()=>gl(De,o().length>=Number(G())?JSON.stringify(o()):null)),vt(De,t=>H(t),()=>H());var Lt=b(De,2);ie(Lt,e,"expand-icon",{get open(){return be()}},t=>{Ll(t,{width:"15px",style:"min-width: 1em; padding: 0 1pt; cursor: pointer;"})});var Qe=b(Lt,2),Ut=v(Qe);Ot(Ut,11,o,(t,a)=>V()?[U()(t),a]:U()(t),(t,a,_)=>{var m=Fl(),F=Ie(()=>sl(l(_))),Y=Ie(()=>nl(l(_)));const D=me(()=>`${Gt(l(a),"selected")??""} ${pt()??""}`);var N=v(m);ie(N,e,"selected",{get option(){return l(a)},get idx(){return l(_)}},S=>{var y=ge(),L=$(y);ie(L,e,"default",{get option(){return l(a)},get idx(){return l(_)}},j=>{var B=ge(),T=$(B);X(T,Le,de=>{var ue=ge(),fe=$(ue);Vt(fe,()=>te(l(a))),w(de,ue)},de=>{var ue=St();A(()=>Me(ue,te(l(a)))),w(de,ue)}),w(j,B)}),w(S,y)});var h=b(N,2);X(h,()=>!I()&&(Xe()===null||o().length>Xe()),S=>{var y=zl(),L=Ie(()=>qt(()=>ft(l(a))));A(()=>E(y,"title",`${Ge()??""} ${te(l(a))??""}`));var j=v(y);ie(j,e,"remove-icon",{},B=>{Zt(B,{width:"15px"})}),p(y),u("mouseup",y,ye(()=>ft(l(a)))),u("keydown",y,function(...B){var T;(T=l(L))==null||T.apply(this,B)}),w(S,y)}),p(m),A(()=>{ke(m,`${Re()??""} svelte-1ndgm4m`),E(m,"draggable",k()&&!I()&&o().length>1),E(m,"style",l(D)),pe(m,"active",l(yt)===l(_))}),Cl(m,()=>Sl,()=>({duration:100})),u("dragstart",m,function(...S){var y;(y=l(F))==null||y.apply(this,S)}),u("drop",m,Ct(function(...S){var y;(y=l(Y))==null||y.apply(this,S)})),u("dragenter",m,()=>P(yt,l(_))),u("dragover",m,Ct(function(S){R.call(this,e,S)})),w(t,m)});var x=b(Ut,2);tt(x),vt(x,t=>xe(t),()=>xe());var rl=b(x,2);ie(rl,e,"after-input",{get selected(){return o()},get disabled(){return I()},get invalid(){return ce()},get id(){return Ne()},get placeholder(){return Ze()},get open(){return be()},get required(){return G()}},null),p(Qe);var Bt=b(Qe,2);X(Bt,Ve,t=>{var a=ge(),_=$(a);ie(_,e,"spinner",{},m=>{Al(m,{})}),w(t,a)});var Pt=b(Bt,2);X(Pt,I,t=>{var a=ge(),_=$(a);ie(_,e,"disabled-icon",{},m=>{Pl(m,{width:"14pt",style:"margin: 0 2pt;","data-name":"disabled-icon"})}),w(t,a)},t=>{var a=ge(),_=$(a);X(_,()=>o().length>0,m=>{var F=Vl(),Y=$(F);X(Y,()=>C()&&(C()>1||it()),N=>{ql(N,{get wiggle(){return l(bt)},set wiggle(h){P(bt,h)},angle:20,children:(h,S)=>{var y=Rl(),L=v(y,!0);A(()=>{var j;return Me(L,(j=it())==null?void 0:j(o().length,C()))}),p(y),A(()=>ke(y,`max-select-msg ${He()??""} svelte-1ndgm4m`)),w(h,y)},$$slots:{default:!0},$$legacy:!0})});var D=b(Y,2);X(D,()=>C()!==1&&o().length>1,N=>{var h=Jl(),S=Ie(()=>qt(jt)),y=v(h);ie(y,e,"remove-icon",{},L=>{Zt(L,{width:"15px"})}),p(h),A(()=>E(h,"title",ct())),u("mouseup",h,ye(jt)),u("keydown",h,function(...L){var j;(j=l(S))==null||j.apply(this,L)}),w(N,h)}),w(m,F)},null,!0),w(t,a)});var ol=b(Pt,2);X(ol,()=>{var t;return M()&&Ee()||((t=Z())==null?void 0:t.length)>0},t=>{var a=Zl(),_=v(a);Ot(_,1,()=>W().slice(0,Math.max(0,Se()??0)||1/0),Qt,(Y,D,N)=>{var h=Hl();const S=me(()=>{const{label:T,disabled:de=null,title:ue=null,selectedTitle:fe=null,disabledTitle:je=re()}=l(D)instanceof Object?l(D):{label:l(D)};return{label:T,disabled:de,title:ue,selectedTitle:fe,disabledTitle:je}}),y=me(()=>r()===N);A(()=>E(h,"title",l(S).disabled?l(S).disabledTitle:l(i)(l(S).label)&&l(S).selectedTitle||l(S).title));const L=me(()=>`${Gt(l(D),"option")??""} ${Fe()??""}`),j=me(()=>l(i)(l(S).label));var B=v(h);ie(B,e,"option",{get option(){return l(D)},idx:N},T=>{var de=ge(),ue=$(de);ie(ue,e,"default",{get option(){return l(D)},idx:N},fe=>{var je=ge(),cl=$(je);X(cl,Le,xt=>{var Ye=ge(),dl=$(Ye);Vt(dl,()=>te(l(D))),w(xt,Ye)},xt=>{var Ye=St();A(()=>Me(Ye,te(l(D)))),w(xt,Ye)}),w(fe,je)}),w(T,de)}),p(h),A(()=>{ke(h,`${st()??""} ${(l(y)?nt():"")??""} svelte-1ndgm4m`),E(h,"style",l(L)),pe(h,"selected",l(j)),pe(h,"active",l(y)),pe(h,"disabled",l(S).disabled)}),u("mousedown",h,ye(function(T){R.call(this,e,T)})),u("mouseup",h,ye(T=>{l(S).disabled||ut(l(D),T)})),u("mouseover",h,()=>{l(S).disabled||r(N)}),u("focus",h,()=>{l(S).disabled||r(N)}),u("mouseout",h,()=>r(null)),u("blur",h,()=>r(null)),w(Y,h)});var F=b(_,2);X(F,M,Y=>{var D=ge();const N=me(()=>o().map(te).includes(M())),h=me(()=>!V()&&l(N)&&"dupe"),S=me(()=>!!(O()&&f())&&"create"),y=me(()=>{var B;return!!(((B=W())==null?void 0:B.length)==0&&Ee())&&"no-match"}),L=me(()=>l(h)||l(S)||l(y));var j=$(D);X(j,()=>l(L),B=>{var T=Wl();const de=me(()=>({dupe:ae(),create:f(),"no-match":Ee()})[l(L)]);var ue=v(T);ie(ue,e,"user-msg",{get searchText(){return M()},get msgType(){return l(L)},get msg(){return l(de)}},fe=>{var je=St();A(()=>Me(je,l(de))),w(fe,je)}),p(T),A(()=>{E(T,"title",f()),ke(T,`user-msg ${Je()??""} ${(l(Ce)?ze():"")??""} svelte-1ndgm4m`),pe(T,"active",l(Ce)),lt(T,"cursor",{dupe:"not-allowed",create:"pointer","no-match":"default"}[l(L)])}),u("mousedown",T,ye(function(fe){R.call(this,e,fe)})),u("mouseup",T,ye(fe=>{O()&&ut(M(),fe)})),u("mouseover",T,()=>P(Ce,!0)),u("focus",T,()=>P(Ce,!0)),u("mouseout",T,()=>P(Ce,!1)),u("blur",T,()=>P(Ce,!1)),w(B,T)}),w(Y,D)}),p(a),vt(a,Y=>P(wt,Y),()=>l(wt)),A(()=>{ke(a,`options ${ve()??""} svelte-1ndgm4m`),E(a,"aria-multiselectable",C()===null||C()>1),E(a,"aria-expanded",be()),E(a,"aria-disabled",I()?"true":null),E(a,"style",Ke()),pe(a,"hidden",!be())}),w(t,a)}),p(ee),vt(ee,t=>Oe(t),()=>Oe()),A(()=>{ke(ee,`multiselect ${ot()??""} svelte-1ndgm4m`),E(ee,"title",I()?oe():null),E(ee,"data-id",Ne()),E(ee,"style",Q()),pe(ee,"disabled",I()),pe(ee,"single",C()===1),pe(ee,"open",be()),pe(ee,"invalid",ce()),E(De,"name",rt()),De.required=G(),ke(Qe,`selected ${se()??""} svelte-1ndgm4m`),E(Qe,"style",Ae()),ke(x,`${Be()??""} svelte-1ndgm4m`),E(x,"style",at()),E(x,"id",Ne()),x.disabled=I(),E(x,"autocomplete",K()),E(x,"inputmode",Pe()),E(x,"pattern",We()),E(x,"placeholder",o().length==0?Ze():null),E(x,"aria-invalid",ce()?"true":null)}),Ml("innerWidth",t=>P(Dt,t)),u("invalid",De,()=>{var a;ce(!0);let t;C()&&C()>1&&Number(G())>1?t=`Please select between ${G()} and ${C()} options`:Number(G())>1?t=`Please select at least ${G()} options`:t="Please select an option",(a=H())==null||a.setCustomValidity(t)}),et(x,M),u("mouseup",x,bl(ye(mt))),u("keydown",x,ye(al)),u("focus",x,function(t){R.call(this,e,t)}),u("focus",x,mt),u("input",x,il),u("drop",x,()=>!1),u("blur",x,function(t){R.call(this,e,t)}),u("change",x,function(t){R.call(this,e,t)}),u("click",x,function(t){R.call(this,e,t)}),u("keydown",x,function(t){R.call(this,e,t)}),u("keyup",x,function(t){R.call(this,e,t)}),u("mousedown",x,function(t){R.call(this,e,t)}),u("mouseenter",x,function(t){R.call(this,e,t)}),u("mouseleave",x,function(t){R.call(this,e,t)}),u("touchcancel",x,function(t){R.call(this,e,t)}),u("touchend",x,function(t){R.call(this,e,t)}),u("touchmove",x,function(t){R.call(this,e,t)}),u("touchstart",x,function(t){R.call(this,e,t)}),u("mouseup",ee,ye(mt)),w(s,ee),Mt()}function Kl(s=!0){const e=this,i=new IntersectionObserver(function([r]){const c=r.intersectionRatio;if(c<1){const f=c<=0&&s?"center":"nearest";e.scrollIntoView({block:f,inline:f})}this.disconnect()});return i.observe(e),i}var Xt;typeof Element<"u"&&!((Xt=Element.prototype)!=null&&Xt.scrollIntoViewIfNeeded)&&typeof IntersectionObserver<"u"&&(Element.prototype.scrollIntoViewIfNeeded=Kl);var Ql=J('<p class="p-2 text-cyan-500"><i class="fa-solid fa-circle-info text-2xl"></i> Make sure members can read and send messages in <span class="font-mono"> </span>.</p>'),Yl=J('<p class="p-2 text-cyan-500"><i class="fa-solid fa-circle-info text-2xl"></i> Make sure members can read but not send messages in <span class="font-mono"> </span>.</p>'),$l=J(' <option class="p-1"> </option>',1),ea=J('<i class="fa-solid fa-spinner animate-spin"></i>'),ta=J('<h1 class="m-4 text-center text-4xl font-bold">Create a panel</h1> <div class="m-2 mx-auto max-w-3xl sm:p-4"><!> <div class="rounded-xl bg-white p-4 shadow-sm dark:bg-slate-700"><div class="text-center"><!></div> <form class="my-4 text-lg"><div class="grid grid-cols-1 gap-4 md:grid-cols-2"><div><label><span class="font-medium">Type</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="How will members use the panel?"></i> <select class="input form-multiselect font-normal" required><option class="p-1">Buttons</option><option class="p-1">Select menu (dropdown)</option></select></label></div> <div><label class="font-medium"><span class="font-medium">Channel</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="The channel to send the panel message to"></i> <select required class="input form-multiselect font-normal"><option>Create a new channel</option><hr><!></select></label></div> <div><label class="font-medium"><span class="font-medium">Categories</span> <!> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="The category options to be available"></i> <!></label></div> <div><label><span class="font-medium">Title</span> <!> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="The embed title" required></i> <input type="text" class="input form-input" required></label></div> <div><label><span class="font-medium">Large image</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Optional - the embed image"></i> <input type="url" class="input form-input"></label></div> <div><label><span class="font-medium">Small image (thumbnail)</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Optional - the embed thumbnail"></i> <input type="url" class="input form-input"></label></div> <div><label class="font-medium"><span class="font-medium">Description</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Optional - the embed description"></i> <textarea class="input form-input h-24" maxlength="4096"></textarea></label></div> <div class="place-self-center"><button type="submit" class="mt-4 rounded-lg bg-green-300 p-2 px-5 font-medium transition duration-300 hover:bg-green-500 hover:text-white disabled:cursor-not-allowed dark:bg-green-500/50 dark:hover:bg-green-500 dark:hover:text-white"><!> Create</button></div></div></form></div> <div class="mx-auto mt-8 max-w-lg text-center text-base"><div class="rounded-xl border-2 border-cyan-500 bg-cyan-500/20 p-2"><i class="fa-solid fa-circle-info text-2xl text-cyan-500"></i> <br> Looking to edit or remove a panel? Just delete the message or channel in Discord.</div></div></div>',1);function Ea(s,e){Tt(e,!0);const i=Yt(),r=()=>$t(yl,"$page",i);let c=e.data,f=qe(c.categories),O=gt(qe(c.channels));P(O,qe(l(O).filter(d=>d.type===0)));let z=gt(null),K=gt(!1),g=qe({categories:[],channel:"new",description:"",image:"",title:"",type:"BUTTON",thumbnail:""}),le=gt(qe([]));const re=f.reduce((d,k)=>(d[(wl.get(k.emoji)??"")+k.name]=k.id,d),{}),I=d=>{var k;return(k=l(O).find(Q=>Q.id===d))==null?void 0:k.name},oe=async()=>{try{P(K,!0);const d={...g};d.channel==="new"&&(d.channel=null),d.categories=l(le).map(se=>re[se]);const k=`/api/admin/guilds/${r().params.guild}/panels`,Q=await fetch(k,{method:"POST",body:JSON.stringify(d),credentials:"include",headers:{"Content-Type":"application/json; charset=UTF-8"}}),ve=await Q.json();if(Q.ok)window.location="./";else throw ve}catch(d){P(K,!1),P(z,qe(d)),window.scroll({top:0,behavior:"smooth"})}};_l(()=>{g.type=g.categories.length>5?"MENU":g.categories.length>1&&g.type==="MESSAGE"?"BUTTON":g.type});var ae=ta(),V=b($(ae),2),U=v(V);X(U,()=>l(z),d=>{xl(d,{get error(){return l(z)}})});var ne=b(U,2),we=v(ne),H=v(we);X(H,()=>g.channel!=="new"&&g.type==="MESSAGE",d=>{var k=Ql(),Q=b(v(k),2),ve=v(Q);A(()=>Me(ve,`#${I(g.channel)??""}`)),p(Q),$e(),p(k),w(d,k)},d=>{var k=ge(),Q=$(k);X(Q,()=>g.channel!=="new"&&g.type!=="MESSAGE",ve=>{var se=Yl(),Ae=b(v(se),2),Ke=v(Ae);A(()=>Me(Ke,`#${I(g.channel)??""}`)),p(Ae),$e(),p(se),w(ve,se)},null,!0),w(d,k)}),p(we);var he=b(we,2),Ne=Ie(()=>Ct(()=>oe())),xe=v(he),Be=v(xe),at=v(Be),Pe=b(v(at),4),ce=v(Pe);ce.value=(ce.__value="BUTTON")==null?"":"BUTTON";var nt=b(ce);nt.value=(nt.__value="MENU")==null?"":"MENU",p(Pe),p(at),p(Be);var ze=b(Be,2),st=v(ze),Fe=b(v(st),4),Re=v(Fe);Re.value=(Re.__value="new")==null?"":"new";var pt=b(Re,2);Ot(pt,17,()=>l(O),Qt,(d,k)=>{$e();var Q=$l(),ve=$(Q),se=b(ve),Ae={},Ke=v(se,!0);p(se),A(()=>{Me(ve,`${l(k).id??""} `),Ae!==(Ae=l(k).id)&&(se.value=(se.__value=l(k).id)==null?"":l(k).id),Me(Ke,l(k).name)}),w(d,Q)}),p(Fe),p(st),p(ze);var Je=b(ze,2),Ve=v(Je),W=b(v(Ve),2);Rt(W);var Se=b(W,4),C=Ie(()=>g.type==="MENU"?25:5),it=Ie(()=>Object.keys(re));Xl(Se,{get selected(){return l(le)},set selected(d){P(le,qe(d))},outerDivClass:"text-base my-1 p-2 rounded-md border-transparent bg-gray-100 dark:bg-slate-800 font-normal shadow-sm transition-colors has-[:focus]:ring-2 has-[:focus]:ring-blurple",inputClass:"p-0 rounded-md bg-transparent transition-colors border-0 focus:ring-0",ulSelectedClass:"bg-gray-100 dark:bg-slate-800 text-gray-800 dark:text-slate-300",liSelectedClass:"bg-blurple text-white text-sm font-semibold font-mono",ulOptionsClass:"bg-white dark:bg-slate-900 p-2 max-h-48 overflow-y-auto",liOptionClass:"rounded-md",liActiveOptionClass:"bg-blurple text-white",liUserMsgClass:"text-red-700 dark:text-red-500 bg-red-400/40 dark:bg-red-500/20",liActiveUserMsgClass:"",maxSelectMsgClass:"text-xs",noMatchingOptionsMsg:"Create a category in the categories section",required:!0,get maxSelect(){return l(C)},get options(){return l(it)}}),p(Ve),p(Je);var He=b(Je,2),rt=v(He),Ee=b(v(rt),2);Rt(Ee);var be=b(Ee,2),Z=b(be,2);tt(Z),p(rt),p(He);var Oe=b(He,2),ot=v(Oe),Le=b(v(ot),4);tt(Le),p(ot),p(Oe);var We=b(Oe,2),Ze=v(We),ct=b(v(Ze),4);tt(ct),p(Ze),p(We);var Ge=b(We,2),Xe=v(Ge),G=b(v(Xe),4);hl(G),p(Xe),p(Ge);var dt=b(Ge,2),M=v(dt),o=v(M);X(o,()=>l(K),d=>{var k=ea();w(d,k)}),$e(),p(M),p(dt),p(xe),p(he),p(ne),$e(2),p(V),A(()=>{ce.disabled=g.categories.length>5,M.disabled=l(K)}),u("submit",he,function(...d){var k;(k=l(Ne))==null||k.apply(this,d)}),Jt(Pe,()=>g.type,d=>g.type=d),Jt(Fe,()=>g.channel,d=>g.channel=d),et(Z,()=>g.title,d=>g.title=d),et(Le,()=>g.image,d=>g.image=d),et(ct,()=>g.thumbnail,d=>g.thumbnail=d),et(G,()=>g.description,d=>g.description=d),w(s,ae),Mt()}export{Ea as component,Na as universal};
